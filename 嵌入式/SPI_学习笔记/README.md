# SPI_笔记

## 参数解释

| 名称                  | 含义                                                                                                                                                            |
| --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| SPI_Direction         | 通信方式(全双工,半双工,串行发串行收)                                                                                                                            |
| SPI_Mode              | 主还是从,模式选择,SPI_Mode_Master or SPI_Mode_Slave                                                                                                             |
| SPI_DataSize          | 数据帧长度选择,8位或16位                                                                                                                                        |
| SPI_CPOL              | 时钟极性,(空闲态的电平)                                                                                                                                         |
| SPI_CPHA              | 时钟相位,串行时钟第一个跳变沿采样数据,或第二个跳变沿~~SPI_CPHA_2Edge                                                                                            |
| SPI_NSS               | NSS信号由硬件控制还是软件控制,这里SPI_NSS_Soft                                                                                                                  |
| SPI_BaudRatePrescaler | 设置SPI波特率预分频值,也就是决定SPI的时钟的参数,从不分频道256分频8个可选值,初始化的时候我们选择256分频值SPI_BaudRatePrescaler_256, 传输速度为36M/256=140.625KHz |
| SPI_FirstBit          | 数据传输顺序,MSB或LSB                                                                                                                                           |
| SPI_CRCPolynomial     | 是用来设置CRC校验多项式,提高通信可靠性,大于1即可                                                                                                                |

## 引脚定义

| 引脚 | 名称                          |
| ---- | ----------------------------- |
| MOSI | 主设备数据输出,从设备数据输入 |
| MISO | 主设备数据输入,从设备数据输出 |
| SCLK | 时钟信号,由主设备产生         |
| CS   | 片选,主机控制,低电平有效      |

## 接线图

```shell
主机->从机: MOSI----------MISO
从机->主机: MISO----------MOSI
主机->从机: -------SCLK-------
主机->从机: --------CS--------
```